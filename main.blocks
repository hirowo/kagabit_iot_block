<xml xmlns="https://developers.google.com/blockly/xml"><block type="pxt-on-start" id="@%fZ3v]Vh=ny4moJ;$iN" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="lax!,nZS2}ZnDl|pF)Ex" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum MyEnum {" line1="    //% block=&quot;年&quot;" line2="    ONE = 1　," line3="    //% block=&quot;月&quot;" line4="    TWO = 2 ," line5="    //% block=&quot;日&quot;" line6="    THREE= 3," line7="    //% block=&quot;時間&quot;" line8="    FOUR = 4," line9="    //% block=&quot;分&quot;" line10="    HUN = 5," line11="    //% block=&quot;秒&quot;" line12="    BYOU = 6" line13="" line14="}" numlines="15"></mutation><next><block type="typescript_statement" id="uH/-{qk)Y#n!1^?4fI=5" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace KAGA_IoT {" line1="//    let p1 = DigitalPin.P0;" line2="//    let p2 = DigitalPin.P16;" line3="    " line4="" line5="    export class KAGA_IoT {" line6="//        pin1: DigitalPin;" line7="//        pin2: DigitalPin;        " line8="    }" line9="    " line10="    //% blockId=INIT block=&quot;初期化　    &quot;" line11="    export function init() : void{" line12="        let block = new KAGA_IoT();" line13="        serial.redirect(SerialPin.P0, SerialPin.P1, 9600)" line14="    }" line15="" line16="   //% blockId=SCONNECT " line17="   //% block=&quot;SSID %string1 PASSWORD %string2 に接続&quot;" line18="    export function SConnect(ssid : string,pass : string) {" line19="        serial.writeString(&quot;SS &quot;);" line20="        serial.writeString(ssid);" line21="        serial.writeString(&quot;\n&quot;);" line22="        serial.writeString(&quot;PA &quot;);" line23="        serial.writeString(pass);" line24="        serial.writeString(&quot;\n&quot;);" line25="        serial.writeString(&quot;WS&quot;);" line26="        serial.writeString(&quot;\n&quot;);" line27="    }" line28="   //% blockId=kakunin " line29="   //% 接続を確認&quot;" line30="    export function cconnect() : number{" line31="        let rtn = 0;" line32="        let str = serial.readString();" line33="        if(str == '$'){" line34="            rtn = 0;" line35="        }" line36="        else {" line37="            rtn = 1;" line38="        }" line39="        " line40="        return rtn;" line41="    }" line42="" line43="" line44="   //% blockId=sendtag " line45="   //% block=&quot;タグを送信する %string &quot;" line46=" //   export function Sendtag(str : string) {" line47=" //       serial.writeString(&quot;SSD &quot;);" line48=" //       serial.writeString(str);" line49=" //       serial.writeString(&quot;\n&quot;);" line50=" //   }    " line51="//     //% blockId=sendsatring " line52="//     //% block=&quot;文字列をwebに表示する %string データ %number&quot;" line53="//    export function SendString(str : string,int : number) {" line54="//        serial.writeString(&quot;SSD &quot;);" line55="//        serial.writeString(str);" line56="//        serial.writeString(int.toString());" line57=" //       serial.writeString(&quot;\n&quot;);" line58="//    }" line59=" //    //% blockId=mdsn block=&quot;ホスト名を設定 %string &quot;" line60=" //   export function set_mdsn(str : string) {" line61="//        serial.writeString(&quot;MD &quot;);" line62="//        serial.writeString(str);" line63="//        serial.writeString(&quot;\n&quot;);" line64="//    }" line65="//    //% blockId=S_web block=&quot;webサーバー開始 &quot;" line66="//    export function start_web() : void {" line67="//        serial.writeString(&quot;SWEB&quot;);" line68="//        serial.writeString(&quot;\n&quot;);" line69="//    }" line70="    //% blockId=START_AMB " line71="    //% block=&quot;チャネルid %String1 ライトキー %String2&quot;" line72="    export function startAmb(ambient_id : string,key : string) {" line73="        serial.writeString(&quot;SAMB &quot;);" line74="        serial.writeString(ambient_id);" line75="        serial.writeString(&quot; &quot;);" line76="        serial.writeString(key);" line77="        serial.writeString(&quot;\n&quot;);" line78="    }" line79="    //% blockId=SET_AM " line80="    //% block=&quot;Ambient チャート番号 %number1 データ %number2 &quot;" line81="    export function SetAmb(channel : number,data : number) {" line82="        serial.writeString(&quot;STA &quot;);" line83="        serial.writeString(channel.toString());" line84="        serial.writeString(&quot; &quot;);" line85="        serial.writeString(data.toString());" line86="        serial.writeString(&quot;\n&quot;);" line87="    }" line88="    //% blockId=SEND_AMB block=&quot;Ambientにデータを送信&quot;" line89="    export function SendAmb()  : void{" line90="        serial.writeString(&quot;SEA &quot;);" line91="        serial.writeString(&quot;\n&quot;);" line92="    }" line93="    //% blockId=SET_MQTT " line94="    //%block=&quot;MQTTサーバーアドレス指定　%String &quot;" line95="    export function SetMqtt(m_address : string) {" line96="        serial.writeString(&quot;SMT &quot;);" line97="        serial.writeString(m_address);" line98="        serial.writeString(&quot;\n&quot;);" line99="    }" line100="    //% blockId=PUB_MQTT " line101="    //%block=&quot;トピックを指定　%String データをパブリッシュ %number&quot;" line102="    export function PubMqtt(topic : string,data : number) {" line103="        serial.writeString(&quot;PUB &quot;);" line104="        serial.writeString(topic);" line105="        serial.writeString(&quot; &quot;);" line106="        serial.writeString(data.toString());" line107="        serial.writeString(&quot;\n&quot;);" line108="    }       " line109="    //% blockId=SUB_MQTT " line110="    //%block=&quot;トピックを指定　%Stringからサブスクライブする&quot;" line111="    export function SubMqtt(topic : string){" line112="        serial.writeString(&quot;SUB &quot;);" line113="        serial.writeString(topic);" line114="        serial.writeString(&quot;\n&quot;);" line115="    }       " line116="    //% blockId=Get_time " line117="    //%block=&quot;時間を取得する&quot;" line118="    export function Gettime() : void{" line119="        serial.writeString(&quot;TG&quot;);" line120="        serial.writeString(&quot;\n&quot;);" line121="    }" line122="    //% blockId=Read_time " line123="    //%block=&quot;%MyEnumを読む&quot;       " line124="    export function ReadTime(e: MyEnum) : string {" line125="        // Add code here" line126="        serial.writeString(&quot;RT &quot;);" line127="        if(e == 1){" line128="            serial.writeString(&quot;1&quot;);" line129="        }" line130="        else if(e == 2){" line131="            serial.writeString(&quot;2&quot;);" line132="        }" line133="        else if(e == 3){" line134="            serial.writeString(&quot;3&quot;);" line135="        }" line136="        else if(e == 4){" line137="            serial.writeString(&quot;4&quot;);" line138="        }" line139="        else if(e == 5){" line140="            serial.writeString(&quot;5&quot;);" line141="        }" line142="        else if(e == 6){" line143="            serial.writeString(&quot;6&quot;);" line144="        }" line145="        else {" line146="" line147="        }" line148="        serial.writeString(&quot;\n&quot;);" line149=" " line150="        return serial.readString();" line151="    }" line152="    //% blockId=ondata " line153="    //%block=&quot;サブスク&quot;       " line154="    export function　Readsub(e: MyEnum) : string {" line155="        serial.onDataReceived(serial.delimiters(Delimiters.NewLine), function () {" line156="    " line157="        })" line158="        return serial.readString();" line159="    }" line160="}" numlines="161"></mutation></block></next></block></statement></block></xml>